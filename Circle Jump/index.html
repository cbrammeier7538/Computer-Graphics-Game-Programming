<!DOCTYPE html>
<html>
<head>
    <title>Circle Jump</title>
    <link href="./style.css" rel"stylesheet">
</head>
<body>
    <canvas id="canv"></canvas>
    <!-- <script src="./Engine/scripts.js"></script>
    <script src="./Engine/time.js"></script>
    <script src="./Engine/Component.js"></script>
    <script src="./Engine/GameObject.js"></script>
    <script src="./Game/CircleDrawComponent.js"></script>
    <script src="./Game/CircleUpdateComponent.js"></script>
    <script src="./Game/CircleGameObject.js"></script>
    <script src="RectangleDrawComponent.js"></script>
    <script src="RectangleGameObject.js"></script>
    <script src="RectangleUpdateComponent.js"></script>-->
<script type = "module">
    "use strict"

    import {getCanvas} from "./Engine/scripts.js"
    import Time from "./Engine/Time.js"
    import Input from "./Engine/Input.js"
    import CircleGameObject from "./Game/CircleGameObject.js";
    import CircleUpdateComponent from "./Game/CircleUpdateComponent.js";
    import RectangleDrawComponent from "./Game/RectangleDrawComponent.js"
    import RectangleGameObject from "./Game/RectangleGameObject.js";
    import RectangleUpdateComponent from "./Game/RectangleUpdateComponent.js";

    import Constants from "./Game/Constants.js"
    import Constants2 from "./Game/Constants2.js"

    Input.attach(document);


    let { canvas, ctx } = getCanvas();

    let gameObjects = []

    gameObjects.push(new CircleGameObject(Constants.x,Constants.y,Constants.r,Constants.s,Constants.e,Constants.c));
    /*let circles = []
    let max = Constants.max;
    let x = Constants.x;
    let y = Constants.y;
    let r = Constants.r;
    let s = Constants.s;
    let e = Constants.e;
    let c = Constants.c;
    let singlecirc = 1;
    for(let i = 0; i < singlecirc; i++){
        let toAdd = {}
        toAdd.x = x;
        toAdd.y = y;
        toAdd.r = r;
        toAdd.s = s;
        toAdd.e = e;
        toAdd.c = c;
        circles.push(new CircleGameObject(toAdd.x,toAdd.y,toAdd.r,toAdd.s,toAdd.e,toAdd.c));
    }*/

    let rectangles = []
    let max2 = 1;
    let recX = Constants2.recX;
    let recY = Constants2.recY;
    let width = Constants2.width;
    let height = Constants2.height;
    let color = Constants2.color;
    for(let i = 0; i < max2; i++){
        let toAdd2 = {};
        toAdd2.recX = recX;
        toAdd2.recY = recY;
        toAdd2.width = width;
        toAdd2.height = height;
        toAdd2.color = color;
        rectangles.push(new RectangleGameObject(toAdd2.recX,toAdd2.recY,toAdd2.width,toAdd2.height,toAdd2.color));
        toAdd2.recX = recX + 1000;
        toAdd2.recY = recY;
        toAdd2.width = width + 50;
        toAdd2.height = height + 50;
        toAdd2.color = "grey";
        rectangles.push(new RectangleGameObject(toAdd2.recX,toAdd2.recY,toAdd2.width,toAdd2.height,toAdd2.color));
        toAdd2.recX = recX + 500;
        toAdd2.recY = recY;
        toAdd2.width = width + 50;
        toAdd2.height = height;
        toAdd2.color = color;
        rectangles.push(new RectangleGameObject(toAdd2.recX,toAdd2.recY,toAdd2.width,toAdd2.height,toAdd2.color));
    }

    /*let bullets = []

    let recX2 = 0;
    let recY2 = 0;
    let offsetX2 = 50;
    let width2 = 100;
    let height2 = 30;
    let color2 = "red";
    let max3 = 1;

    function uploadBullet(){
        for(let i = 0; i < max3; i++){
            let toAdd3 = {}
            toAdd3.recX2 = 300;
            toAdd3.recY2 = 300;
            toAdd3.width2 = width2;
            toAdd3.height2 = height2;
            toAdd3.color2 = color2;
            bullets.push(toAdd3)
        }
    }*/
    

    function tick(){
        Input.update();
        update()
        draw()
        Time.timePassed += Time.secondsBetweenFrame;
    }
    function update(){
        for(let gameObject of gameObjects) {
            gameObject.update();
        }
        /*let j = 0;
        for(let bullet of bullets){
        if(sisPressed){
            if(bullet.recX2 == 300)
            {
                while(bullet.recX2 != 1650){
                bullet.recX2 += 10;
                }
            }
            else if(bullet.recX2 == 1650)
            {
                while(bullet.recX2 != 300){
                    bullet.recX2 -= 10;
                }
            }
        }
        }*/
    }
    function draw(){
        ctx.fillStyle = "black"
        ctx.strokeStyle = "white"
        ctx.lineWidth = 10

        ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
        ctx.strokeRect(0, 1, ctx.canvas.width, ctx.canvas.height);
        for(let gameObject of gameObjects) {
            gameObject.draw(ctx);
        }
        for(let rectangle of rectangles) {
            rectangle.draw(ctx);
        }
        /*let k = 0;
        for(let bullet of bullets) {
            let bullet = bullets[k];
            ctx.fillStyle = bullet.color2;
            ctx.strokeStyle = "white"
            ctx.beginPath()
            ctx.rect(
                bullet.recX2,
                bullet.recY2,
                bullet.width2,
                bullet.height2
            )
            ctx.fill();
            ctx.stroke();
            k++;
        }*/
    }
    setInterval(tick, Time.millisecondsBetweenFrames)
    </script>
</body>
</html>